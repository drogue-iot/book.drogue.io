<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Running locally :: Drogue IoT</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z4BRXRBJJ1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-Z4BRXRBJJ1')</script>
    <script>var uiRootPath = '../../_'</script>
    <link rel="icon" href="../../_/img/favicon.svg" type="image/svg+xml">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
        <img class="navbar-brand-image" src="../../_/img/logo.png" alt="Drogue IoT"/>
      </a>

      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://blog.drogue.io" target="_blank">Blog</a>
        <a class="navbar-item" href="https://matrix.to/#/#drogue-iot:matrix.org" target="_blank">Chat</a>
        <a class="navbar-item" href="https://book.drogue.io">Documentation</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="drogue-workshops" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Drogue IoT Workshops</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started/index.html">Getting started</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../external/telemetry-e2e.html">Telemetry end-to-end</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ttn-lorawan-quarkus/index.html">LoRaWAN end-to-end</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../common/toolchain.html">Embedded toolchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/account-setup.html">TTN account setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/drogue-cloud.html">Drogue Cloud setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/firmware.html">Device firmware</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/quarkus-application.html">Quarkus application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ttn-lorawan-quarkus/making-changes.html">Making changes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Quarkus MQTT integration starter</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="peeking.html">What to expect</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="local.html">Running it locally</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="internals.html">How does it work?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetes.html">Deploying to Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cloud.html">Moving to the cloud</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Drogue IoT Workshops</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../drogue-cloud/dev/index.html">Drogue Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-cloud/dev/index.html">dev</a>
        </li>
        <li class="version">
          <a href="../../drogue-cloud/0.7/index.html">0.7</a>
        </li>
        <li class="version">
          <a href="../../drogue-cloud/0.6/index.html">0.6</a>
        </li>
        <li class="version">
          <a href="../../drogue-cloud/0.5/index.html">0.5</a>
        </li>
        <li class="version">
          <a href="../../drogue-cloud/0.4/index.html">0.4</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../drogue-device/dev/index.html">Drogue Device</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-device/dev/index.html">dev</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../drogue-book/index.html">Drogue IoT</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../drogue-book/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Drogue IoT Workshops</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../drogue-book/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Drogue IoT Workshops</a></li>
    <li><a href="index.html">Quarkus MQTT integration starter</a></li>
    <li><a href="local.html">Running it locally</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/drogue-iot/drogue-workshops/edit/main/modules/quarkus-mqtt-starter/pages/local.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Running locally</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The next step is to run this locally.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_the_source_code"><a class="anchor" href="#_getting_the_source_code"></a>Getting the source code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Go to <a href="https://github.com/drogue-iot/quarkus-mqtt-integration-starter">drogue-iot/quarkus-mqtt-integration-starter</a> on
GitHub and fork the repository. It is a template repository, which allows you to easily create a copy of it. This allows
you to make and push changes to your own copy, and is required for other parts of the workshop.</p>
</div>
<div class="paragraph">
<p>You can easily do this by making a copy:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/template-repo.png" alt="Screenshot of template button"></span></p>
</div>
<div class="paragraph">
<p>Choose a name, and then clone the repository on your local machine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Repository location</div>
<div class="paragraph">
<p>The following commands and examples will still use the original HTTP link to the repository.</p>
</div>
<div class="paragraph">
<p>If you created a copy, please be sure to adapt the name accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On your local machine, you can clone the source using the <code>git</code> command line tool like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>git clone https://github.com/drogue-iot/quarkus-mqtt-integration-starter</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_which_ideeditor_to_use"><a class="anchor" href="#_which_ideeditor_to_use"></a>Which IDE/editor to use?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is completely up to you! Quarkus works together with all kinds of IDEs and editors.</p>
</div>
<div class="paragraph">
<p>In the following sections we will focus on command line usage of tools, like <code>mvn</code>. You know your environment best,
so if you dislike using the command line, you can always use equivalent IDE operations instead.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_locally"><a class="anchor" href="#_starting_locally"></a>Starting locally</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus applications can be started locally by executing the following command, and this application is no different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will compile and run the application in debug mode. Beside the Maven build output, you should see the
application&#8217;s log output in the end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[INFO] No sources to compile
Listening for transport dt_socket at address: 5005
__  ____  __  _____   ___  __ ____  ______
 --/ __ \/ / / / _ | / _ \/ //_/ / / / __/
 -/ /_/ / /_/ / __ |/ , _/ ,&lt; / /_/ /\ \
--\___\_\____/_/ |_/_/|_/_/|_|\____/___/
2021-06-08 15:15:35,753 INFO  [io.und.websockets] (Quarkus Main Thread) UT026003: Adding annotated server endpoint class io.drogue.iot.demo.ui.EventsResource for path /ws
2021-06-08 15:15:35,775 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00226: Found incoming connectors: [smallrye-mqtt]
2021-06-08 15:15:35,776 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00227: Found outgoing connectors: [smallrye-mqtt]
2021-06-08 15:15:35,777 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00229: Channel manager initializing...
2021-06-08 15:15:35,795 DEBUG [io.sma.rea.mes.mqt.ses.imp.MqttClientSessionImpl] (vert.x-eventloop-thread-0) Creating connection
2021-06-08 15:15:35,798 DEBUG [io.sma.rea.mes.mqt.ses.imp.MqttClientSessionImpl] (vert.x-eventloop-thread-0) setState - current: DISCONNECTED, next: CONNECTING
2021-06-08 15:15:35,823 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00209: Beginning graph resolution, number of components detected: 8
2021-06-08 15:15:35,825 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00210: Graph resolution completed in 1394483 ns
2021-06-08 15:15:35,825 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00235: Beginning materialization
2021-06-08 15:15:35,856 DEBUG [io.sma.rea.mes.provider] (Quarkus Main Thread) SRMSG00236: Materialization completed in 30541131 ns
2021-06-08 15:15:35,921 DEBUG [io.sma.rea.mes.mqt.ses.imp.MqttClientSessionImpl] (vert.x-eventloop-thread-0) Request to subscribe to: app/drogue-public-temperature / QOS_0
2021-06-08 15:15:35,922 DEBUG [io.sma.rea.mes.mqt.ses.imp.MqttClientSessionImpl] (vert.x-eventloop-thread-0) Requesting subscribe: app/drogue-public-temperature / QOS_0
2021-06-08 15:15:35,933 DEBUG [io.ver.mqt.imp.MqttClientImpl] (vert.x-eventloop-thread-0) Trying to connect with mqtt-integration-drogue-dev.apps.wonderful.iot-playground.org:443
2021-06-08 15:15:36,036 INFO  [io.quarkus] (Quarkus Main Thread) drogue-quarkus-mqtt-integration-starter 1.0.0-SNAPSHOT on JVM (powered by Quarkus 2.0.0.CR3) started in 1.499s. Listening on: http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command will not return to the shell, you need to abort the command using <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span></p>
</div>
<div class="paragraph">
<p>Watch out for a line like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2021-06-08 15:15:36,315 DEBUG [io.sma.rea.mes.mqt.ses.imp.MqttClientSessionImpl] (vert.x-eventloop-thread-0) setState - current: CONNECTING, next: CONNECTED</code></pre>
</div>
</div>
<div class="paragraph">
<p>The transition to <code>CONNECTED</code> shows, that the MQTT connection has been establishes successfully.</p>
</div>
<div class="paragraph">
<p>After that, a line like the following should appear too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2021-06-08 15:15:44,520 INFO  [io.dro.iot.dem.int.Receiver] (vert.x-eventloop-thread-0) Received message: CloudEvent{id='dec025b8-3ef8-4a15-a531-bda944dcd9db', source=drogue://drogue%2Dpublic%2Dtemperature/A4%3AC1%3A38%3AA2%3A6D%3A42, type='io.drogue.event.v1', datacontenttype='application/json', dataschema=urn:drogue:iot:temperature, subject='status', time=2021-06-08T13:15:44.459994106Z, data=BytesCloudEventData{value=[123, 34, 116, 101, 109, 112, 34, 58, 32, 51, 48, 46, 56, 44, 32, 34, 104, 117, 109, 34, 58, 32, 52, 49, 44, 32, 34, 98, 97, 116, 116, 34, 58, 32, 57, 52, 44, 32, 34, 103, 101, 111, 108, 111, 99, 34, 58, 32, 123, 34, 108, 97, 116, 34, 58, 32, 52, 56, 46, 48, 55, 56, 56, 56, 44, 32, 34, 108, 111, 110, 34, 58, 32, 49, 49, 46, 56, 54, 49, 57, 52, 125, 125]}, extensions={knativehistory=iot-channel-kn-channel.drogue-dev.svc.cluster.local, instance=drogue, partitionkey=drogue%2Dpublic%2Dtemperature/A4%3AC1%3A38%3AA2%3A6D%3A42, application=drogue-public-temperature, device=A4:C1:38:A2:6D:42}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates a received message, including its payload, in binary format. But you can already see that the message
has been successfully decoded as a "CloudEvent". The metadata of the cloud event already gives a bit of information
what the event is about.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_one_small_step"><a class="anchor" href="#_one_small_step"></a>One small step â€¦</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This already was the first step. You can take your browser and navigate to <a href="http://localhost:8080" class="bare">http://localhost:8080</a> and should see
the same dashboard that the sandbox hosts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next"><a class="anchor" href="#_whats_next"></a>What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it is time to understand what is going on under the hood. And get ready to make some first changes.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
